<!DOCTYPE html>

{% load staticfiles %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

    <!-- Include leaflet CSS in the head section of document -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css" />

	<!-- Include leaflet script file in the head section of document -->
	<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"></script>

	<!-- Include css file -->
	<link rel="stylesheet" type="text/css" href="{% static 'style.css' %}" media="screen" />

	<!-- Include javascript file-->
	<script type="text/javascript" src="{% static 'code.js' %}"></script>
</head>
<body>
    <div id="map"></div>

    <div>
	    <textarea id="inserted_points_box" name="inserted_points" placeholder="No inserted points."></textarea>
    </div>

    <button onclick="show_markers()">Display markers</button>
    <button onclick="hide_markers()">Hide markers</button>

	<!-- call script -->
	<script type="text/javascript">

		var map;

		// initialize map
		initmap();

		// points to be inserted
		var inserted_points = [];
		var inserted_markers = [];

		// add mouse listener
		map.on('click', onMapClick);



	</script>

    <h2>Add point</h2>
    <form action="points/create" method="POST" class="post-form">{% csrf_token %}
        {{ form.as_p }}
        <button type="submit" class="save btn btn-default">Save</button>
    </form>


    <h1>Points</h1>
    {% if points %}
    <ul>
    {% for point in points %}
        <li>
            <p>{{ point.name }} {{point.coordinate_x}} {{point.coordinate_y}} </p>
            <form action="{% url 'delete_point' id=point.id %}" method="POST">
                {% csrf_token %}
                <input class="btn btn-default btn-danger" type="submit" value="Delete"/>
            </form>
        </li>
    {% endfor %}
    </ul>
    {% else %}
        <p>There are no points in the DB.</p>
    {% endif %}
</body>
</html>